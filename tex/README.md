<!-- book: не очень краткое введение в LaTeX 2003 -->

ссылки: label, ref, eqref

# Общее<!-- {{{ -->
## Команды<!-- {{{ -->
Команды начинаются с \
### Окружения<!-- {{{ -->
```latex
\begin{название}
    текст
\end{название}
```
<!-- }}} -->
### Комментарии<!-- {{{ -->
+ `%` - игнорирует остаток строки  
+ `\begin{comment} \end{comment}`  
<!-- }}} -->
<!-- }}} -->
## Структура<!-- {{{ -->
Структура документа:  
+ `\documentclass{}` - документ какого типа я пишу  
+ `\usepackage{}` - загрузка пакетов  
+ `\begin{document} \end{document}` - начинаю тело текста  
### documentclass<!-- {{{ -->
Структура - `\documentclass[opt]{class}`.
__class__ - тип создаваемого документа:  
+ article - статьи в научных журналах  
+ report - для более длинных отчётов, диссертаций  
+ book - для книг  
+ slides - для слайдов  

__options__ - изменяет поведение класса документа, разделяются запятыми:  
+ 10pt, 11pt, 12pt - размер основного шрифта документа  
+ a4paper, letterpaper - размер листа  
+ fleqn - формулы выравнены влево  
+ leqno - формулы нумеруются слева  
+ titlepage, notitlepage - указывает, должна начинаться новая страница после заголовка документа или нет  
+ left=1cm,  
+ right=2cm,  
+ top=3cm,
+ bottom=4cm,
    % use vmargin=2cm to make vertical margins equal to 2cm.
    % us  hmargin=3cm to make horizontal margins equal to 3cm.
    % use margin=3cm to make all margins  equal to 3cm.

+ onecolumn, twocolumn - набирать документ в один столбец или в два столбца  
+ twoside, oneside - выбирает одно или двусторонний ввод  
+ landscape - меняет положение страницы на ландшафтное  
+ openright, openany - делает главы начинающимися только на правой или на первой доступной стр.  
<!-- }}} -->
### usepackage<!-- {{{ -->
Структура - `\usepackage[opt]{package}`  
Некоторые из пакетов:  

+ doc - документировать программы на latex  
+ exscale - масштабированные версии расширенных мат. шрифтов  
+ fontenc - указывает кодировку шрифта  
+ ifthen - ветвление  
+ latexsym - шрифт специальных символов  
+ makeidx - генерация указателей  
+ syntonly - обрабатывает документ, не печатая его  
+ inputenc - указывает входную кодировку  
<!-- }}} -->
<!-- }}} -->
## Пакеты, настройки<!-- {{{ -->
### Настройка языка | неправильные переносы<!-- {{{ -->
Если форматный файл Теха не поддерживает переносов для выбранного языка, babel будет работать, но запретит переносы, что негативно скажется на внешнем виде
Если используешь несколько языков:
\usepackage[lan1,lan2]{babel}
Для выбора текущего используй команду:
\selectlanguage{lan1}
<!-- }}} -->
<!-- }}} -->
<!-- }}} -->
# Содержание<!-- {{{ -->
## Структура<!-- {{{ -->
Для книг:  
+ `\frontmatter` - первая команда после бегиндокумент, переключает нумерацию на римские цифры  
+ `\mainmatter` - перед первой главной, переключает нумерацию на цифры и сбрасывает счётчик  
+ `\appendix` - доп материал  
+ `\backmatter` - самые последние части книги  
### Титульный лист<!-- {{{ -->
Генерируется с помщью: `\maketitle`  
Содержимое определяется командами: `\title{}, \author{}, \data{}`  
<!-- }}} -->
### Заголовки, главы и разделы<!-- {{{ -->
Заголовки, главы и разделы
_Пример:_ `\chapter[Заголовок для оглавления]{Длиннный заголовок в тексте}`  
Для __article__:  
+ `\section{}`  
+ `\subsection{}`  
+ `\subsubsection{}`  
+ `\paragraph{}`  
+ `\subparagraph{}`  
+ _В report и book_ - `\chapter{}`  

LaTeX создаёт оглавление: `\tableofcontents`  

Если надо разбить на части __без изм.__ нумерации: `\part{}`  
Чтобы убрать __нумерацию__ - добавить звёздочку к концу команды.  
<!-- }}} -->
### Отступы на страницах
<!-- }}} -->
## Добавление файлов<!-- {{{ -->
Включить содержимое другого файла:  
`\include{файл}`  
Читать только некоторые из включённых файлов:  
`\includeonly{fname1, fname2, ...}`  
Просто включить содержимое:  
`\input{fname}`  
<!-- }}} -->
## Невидимые символы<!-- {{{ -->
### Пробел  <!-- {{{ -->
+ Несколько последовательных пустых символов = 1 пробел  
+ Пустые символы в начале строки игнорируются  
+ Единичный перевод строки = пробел  
+ Пустая строка между двух строк = конец абзаца   
+ Несколько пустых строк = 1 пустая строка  

__Манипуляция с пробелами__:  
+ `\` запрещает увеличение пробела  
+ `~` то же самое, запрещает разрыв строки.  
+ `\frenchspacing` - запретить доп. пробел после точек  
<!-- }}} -->
### Перенос строки<!-- {{{ -->
+ `\\` или `\newline` начинают новую строку  
+ `\\*` запрещает разрыв страницы  
+ `\newpage` начинает новую страницу  
+ `\linebreak[n]`, `\nolinebreak[n]`, `\pagebreak[n]`, `\nopagebreak[n]` - разрыв и запрет разрыва соответственно  

Указать __место для переноса__ - `\-` (делает его единственным).  
__Запрещение__ переносов на определённое слово: `\hyphenation{список слов}`  
  
Несколько слов можно __удержать вместе__ командой: `\mbox{текст}`  
`\fbox` аналогична, но будет нарисована видимая рамка.  
<!-- }}} -->
<!-- }}} -->
## Символы<!-- {{{ -->
\ = $\backslash$
Для __кавычек__ используются '' \`\`  

Несколько видов __тире__:   
+ `-`   дефис  
+ `--`  короткое тире  
+ `---` длинное тире  

Чтобы использовать __тильду__ `\~{}` или `$\sim$`  

Знак __градуса__ `^{\circ}`  
Знак __евро__:  
```latex
\usepackage{textcomp}
\texteuro
```
либо:
```latex
\usepackage[official|gen]{eurosym}
\texteuro
```
либо:
```latex
\usepackage{marvosym} - включает множество разных симв.
\EUR
```

__Многоточие__ - `\ldots`

__Акценты__ и __спец. символы__ ( при \i \j ):  
+ `\^`  
+ `\"`  
+ `\'`  
+ \\\`  
+ `\o`  
+ `\~`  
+ `\ss`  

Текущая дата на текущем языке - `\today`  
<!-- }}} -->
## Объекты <!-- {{{ -->
### Таблицы<!-- {{{ -->
`\begin{tabular}[позиция]{спецификация}`  
_Спецификация_: _(определяет формат таблицы)_  

+ `l` - столбец выровнен влево  
+ `r` - вправо   
+ `c` - центр  
+ `p{ширина}` - для стобца содержащего выровненный текст с переносом
  строк  
+ `|` - для вертикальной линии  
+ `${...}` - задать разделитель между стобцами (заменяет пробел на
  переданный символ)  

_Позиция_: _(вертикальное положение всего табличного окружения)_  

+ `t,b,c` - выравнивание по верхнему, нижнему или центру
  соответственно  

Внутри окружения `tabular`:  

+ `&` переходит к следующему столбцу  
+ `\\` начинает новую строку  
+ `\hline` вставляет горизонтальную линию  
+ `\cline{j-i}` вставляет неполные линии, где j и i - номера столбцов,
  над которыми должна проходить линия  

Как сделать выравнивание по десятичной точке в ТеХе:  
```latex
\begin{tabular}{c r ${.} l}
Выражение с $\pi$ & \multicolumn{2}{c}{Значение} \\
\hline
$\pi$               & 3&1416    \\
$\pi^{\pi}$         & 36&46     \\
$(\pi^{\pi})^{\pi}$ & 80662&7   \\
\end{tabular}
```

Multicolumn позволяет поставить одно название на две колонки.  
Точку в числе заменяем на разделитель. Таким образом происходит
выравнивание по точке.  

Если нужно набирать длинные таблицы, используй окружения `supertabular`
или `longtable`.  
<!-- }}} -->
### Плавающие объекты <!-- {{{ -->
Любая иллюстрация или таблица, не умещающаяся на текущей странице, может
"плавать", перемещаясь на следующую страницу в процессе заполнения
текстом текущей.  
LaTeX предлагает два окружения - одно для таблиц, второе для
иллюстраций.  

---  

Любой материало включенный в окружения `figure` или `table`, трактуется
как плавающий. Оба окружения имею необязательный параметр (спец. разм.):  

+ `\begin{figure}[спецификация размещения]`  
+ `\begin{table}[спецификация размещения]`  

Спецификация размещения конструируется путем собирания в строчку _ключей
размещения плавающего объекта._  

| Ключ | Разрешает помещать объект                                                           |
| ---  | ---                                                                                 |
| h    | здесь же, в том самом месте текста, где он появился (обычно для маленьких объектов) |
| t    | наверху страницы                                                                    |
| b    | внизу страницы                                                                      |
| p    | на специальной странице, содержащей только плавающие объекты                        |
| !    | не рассматривать больш. внутр. параметров, кот. могут предотвратить размещение      |

Если спецификации размещения **_не задано_**, стандартные классы
предполагают `[tbp]`  

Заметки:

+ Если LaTeX не размещает плавающие объекты, обычно это
происходит потому, что какой то объект устроил затор.  
+ Не используйте ключ `h`  

---  

+ `\caption[коротки заголовок]{длинный заголовок}` - можешь создать
заголовок для объекта.  
+ `\listoffigures` и `\listoftables` - печатают список иллюстраций и
  таблиц  
+ `\label` (в окружении) и `\ref` (в тексте) - можно делать ссылки из вашего текста на плавающий
  объект  
+ `\clearpage` - немедленно разместить все плавающие объекты, оставшиеся
  в очередях, и затем начать новую страницу  
+ `\cleardoublepage` - помимо этого начинает новую правостороннюю
  страницу  

<!-- }}} -->
<!-- }}} -->
## Форматирование<!-- {{{ -->
`\sloppy` - ослабить стандарты  
`\fussy` - усилить стандарты  

Сменить стиль __текущей страницы__ командой: `\thispagestyle{style}`  
### Текст<!-- {{{ -->
__Выделение слова__:  
+ `\underline{текст}` - подчёркивание  
+ `\emph{текст}` - курсив   
__Выравнивание__ влево, вправо и по центру:  
+ `\begin{flushleft}`  
+ `\begin{flushright}`  
+ `\begin{center}`  
__Списки__:  
+ `\begin{itemize}` - не нумерованные списки  
+ `\begin{enumerate}` - нумерованные списки  
+ `\begin{description}` - с выделением слова  
Их элемент: `\item[то что идёт вначале]`   
__Цитаты__: _строки разделяются при помощь \\_  
+ `\begin{quote}`  
+ `\begin{quotation}` - для цитирования с абзацами  
+ `\begin{verse}` - для стихов  
__Буквальное воспроизведение__: _(если внутри много специальных
символов)_:
+ `\begin{verbatim}`  
+ `\verb+текст+` - вместо + может быть любой символ разграничитель  
<!-- }}} -->
<!-- }}} -->
## Колонтитулы<!-- {{{ -->
Предопределённые комбинации верхнего колонтитула, нижнего колонтитула.
`\pagesyle{стиль}`, где стиль:  

+ `plain` - номера страниц внизу в середине  
+ `headings` - название текущей главы и номер страницы в верхнем колонитуле, нижний - пустой  
+ `empty` - делает и верхние и нижние колонитулы пустыми  

---  
**Нумерация**  
`\appendix` - начинает нумеровать главы буквами вместо цифр  
<!-- }}} -->
## Ссылки<!-- {{{ -->
+ `\label{метка}`  
+ `\ref{метка}`  
+ `\pageref{метка}`  
<!-- }}} -->
## Сноски<!-- {{{ -->
+ `\footnote{текст сноски}`  
<!-- }}} -->
## Защита хрупких команд <!-- {{{ -->
Текст, заданные в аргументах команд наподобие `\caption` или `\section`,
появляется в документе больше одного раза (например, в оглавлении, в
колонтитулах и в теле документа). Некоторые команды не работает в
аргументах вышеперечисленных. Такие команды называют **_хрупкими_**
(`\footnote` или `\phantom`). Для того, чтобы они работали как
предполагается, необходимо перед ними поставить команду `\protect`.  
<!-- }}} -->
<!-- }}} -->
# Набор математических формул <!-- {{{ -->
## Общее <!-- {{{ -->
В латехе есть специальный режим для верстки математики.  

+ внутри абзаца вводится между `\(` и `\)`, между `$` и `$`, между
  `\begin{math}` и `\end{math}`;  
+ на отдельных строчках. Заключать между `\[` и `\]` или между
  `\begin{displaymath}` и `\end{displaymath}`;  

Для **_нумерации_** используй окружение `equation`.  
Можно поместить метку с помощью `\label` и сослаться с помощью `\ref`
или `\eqref`:  

```latex
\begin{equation}
    \label{eq:eps}
    \epsilon > 0
\end{equation}
Из (\ref{eq:eps}) выводим \ldots{} из eqref{eq:eps} мы делаем то же.
```

Отличие _математического режима_ от _текстового режима_. В мат режиме:  

1. Большиство пробелов и возвратов каретки не принимаются во внимание,
   или должны явно передаваться командами вроде `\,`,`\quad` или `\qquad`  
2. Пустые строчки недопустимы.  
3. Каждая буква считается именем переменной.  
<!-- }}} -->
## Групировка в математическом режиме <!-- {{{ -->
Если хочешь чтобы команда влияла на не сколько символов, надо их
сгрупировать с помощью фигурных скобок: `{...}`  
```latex
\begin{equation}
    a^x+y \new a^{x+y}
\end{equation}
```

<!-- }}} -->
## Составляющие математической формулы <!-- {{{ -->
Наиболее важные команды в математической вестке.  

**Строчные греческие буквы:** `\alpha`, `\beta`, `\gamma`, ...  
прописные вводятся как `\Gamma`, `\Delta`, ...  

**Верхние и нижние индексы** вводятся при помощи `^` и `_`  

**Квадратный корень** - `\sqrt[n]`  

**Горизонтальные линии** сразу над или под выражением - `\overline` и
`\underline`.  

**Горизонтальные фигурные скобки** сразу над или под выражением -
`\overbrace` и `\underbrace`:  
```latex
$\underbrace{ a+b+\cdots+z }_{26}$
```

Широкие "шляпки" и тильды, охватывающие несколько символов, генерируются
командами `\widetilde` и `\widehat`.  

`'` - знак производной.  

**Векторы** - либо `\vec`, либо, для обозначения вектора от A до B -
`\overrightarrow` и `\overleftarrow`.  

**Знак точки**, обозначающий умножение - `\cdot`.  

Набор имен наиболее **важных функций**:  

|         |       |      |       |         |         |      |
| ---     | ---   | ---  | ---   | ---     | ---     | ---  |
| \arccos | \cos\ | csc  | \exp  | \ker    | \limsup | \min |
| \arcsin | \cosh | \deg | \gcd  | \lg     | \ln     | \Pr  |
| \arctan | \cot  | \det | \hom  | \lim    | \log    | \sec |
| \arg    | \coth | \dim | \inf  | \liminf | \max    | \sin |
| \sinh   | \sup  | \tan | \tanh |         |         |      |

**Функция модуля** - `\bmod` (_a_ mod _b_), `\pmod` (_x_ == _a_ (mod _b_))  
```latex
$a\bmod b$\\
$x\equiv a \pmod{b}$
```

**Дробь** - `\frac{...}{...}`  

**Биномиальные коэффиценты** или аналогичные структуры - `\binom` из
пакета _amsmath_  

Для бинарных отношение бывает удобно размещать **символы друг над другом** - `\stackrel`
- набирает символ, заданные первым аргументом (шрифтом индексов) и размещает его над
вторым аргументом.  

**Оператор интеграла** печатает команда `\int`, **оператор суммы** -
`\sum`, **оператор произведения** - `\prod`. Пределы указываются при
помощи символов `^` и `_`  

Для получения большего контроля над размещением индексов - `\substack`
и окружение `subarray`.  
Они вдвоем позволяют расположить индесы в два ряда, разделение которых
происходит с помощью двойного слеша (\\\\)  

Для **скобок** и прочих ограничителей. Квадратные и круглые скобки можно
вводить соответствующими клавишами, фигурные скобки - `\{`  
Если ты поместишь перед открывающим ограничителем команду `\left`, или
перед закрывающим - `\right`, то тех автоматически выберет правильный
размер ограничителя.  
Если необходимо задать корректный размер **_самостоятельно_** существуют
команды-префиксы - `\big`, `\Big`, `\bigg` и `\Bigg`.  

Чтобы ввести **три точки** - `\ldots`, `\cdots` (центрированные),
`\vdots` (вертикальные) и `\ddots` (диагональные)  


<!-- }}} -->
<!-- TODO: поставить в какую нибудь группу -->
Жирные символы - `\mathbf{}`  
Ажурные полужирные символы - `\mathbb` из пакетов _amsfonts_ или
_amssymb_.  
`\textrm{}`  
## Математические пробелы <!-- {{{ -->
В порядке увеличения пр-ва:  

+ `\,`  
+ `\:`  
+ `\;`  
+ `\ ` (экранированный пробел)  
+ `\quad(<space><space><space>)` - дает большие пробелы (размер каждого
  примерно равен ширине М)
+ `\!` - отрицательный пробел

Между интегралами много пространства - помогут команды `\iint`,
`\iiint`, `\iiiint` и `\dotsint` (с загруженным пакетом **_amsmath_**).  

<!-- }}} -->
## Вертикально расположенный материал <!-- {{{ -->
Для верстки **матриц** пользуйтесь окружением _array_. Его структура
напоминает окружение _tabular_. Для разделителя - `&`, для разрыва
строки - `\\`.  

Окружение `array` можно также использовать для верстки выражений,
имеющих один большой ограничитель, подставляя `.` в качестве невидимого
правого ограничителя:  
```latex
\begin{displaymath}
y = \left\{ \begin{array}{ll}
    a & \textrm{если $d>c$} \\
    b+x & \textrm{по утрам} \\
    l & \textrm{остальное время дня}
    \end{array} \right.
\end{displaymath}
```

Так же как в _tabular_, можно рисовать линейки в окружении _array_.  

```latex
\begin{displaymath}
\left(\begin{array}{c|c}
    1 & 2 \\
    \hline
    3 & 4
end{array}\right)
\end{displaymath}
```

Для формул **занимающих несколько строк** используй окружения `eqnarray`
(нумерует уравнения) и `eqnarray*` (не нумерует). Эти окружения работают
наподобие таблицы из трех столбцов формата _{rcl}_, где средний столбец
используется для знака равенства. Команда `\\` разбивает строки.  

По обеим сторонам средней колонки слишком много места, его можно
уменьшить с помощью `\setlength\arraycolsep{2pt}`. (открываешь фигурные
скобки, в самом начале (как буд-то секция в C) пишешь эту команду, после
которой открываешь окружение на несколько строк)  

**Длинные уравнения** автору придется разбивать на части самостоятельно
(так же надо указать как выравнивать).  

+ _Для переноса_ - `\\`  
+ Для того, чтобы **не нумеровать строчку** с которой переносишь, перед
  знаком разбиения надо поставить команду - `\nonumber`  
+ На новой строчке пишешь как в таблице, возможно пропустишь какое-то
  кол-во столбцов.  
+ Перед первым знаком на новой строчке пишешь закрытые фигурные скобки
  как - `{}+a`  

Более мощные инструменты предлагает пакет _amsmath_ окружения _align_,
_flalign_, _gather_, _multiline_ и _split_  

<!-- }}} -->
## Фантомы <!-- {{{ -->
`\phantom` позволяет вставлять символы, которых не будет видно (для
выравнивания, или создания отступов).  
<!-- }}} -->
## Размер математического шрифта <!-- {{{ -->
<!-- TODO: stopped here -->
<!-- }}} -->
<!-- }}} -->
