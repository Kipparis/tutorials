<!-- book: не очень краткое введение в LaTeX 2003 -->

ссылки: label, ref, eqref  

# Общее<!-- {{{ -->
## Команды<!-- {{{ -->
Команды начинаются с \
### Окружения<!-- {{{ -->
```latex
\begin{название}
    текст
\end{название}
```
<!-- }}} -->
### Комментарии<!-- {{{ -->
+ `%` - игнорирует остаток строки  
+ `\begin{comment} \end{comment}`  
<!-- }}} -->
<!-- }}} -->
## Структура<!-- {{{ -->
Структура документа:  
+ `\documentclass{}` - документ какого типа я пишу  
+ `\usepackage{}` - загрузка пакетов  
+ `\begin{document} \end{document}` - начинаю тело текста  
### documentclass<!-- {{{ -->
Структура - `\documentclass[opt]{class}`.
__class__ - тип создаваемого документа:  
+ article - статьи в научных журналах  
+ report - для более длинных отчётов, диссертаций  
+ book - для книг  
+ slides - для слайдов  

__options__ - изменяет поведение класса документа, разделяются запятыми:  
+ 10pt, 11pt, 12pt - размер основного шрифта документа  
+ a4paper, letterpaper - размер листа  
+ fleqn - формулы выравнены влево  
+ leqno - формулы нумеруются слева  
+ titlepage, notitlepage - указывает, должна начинаться новая страница после заголовка документа или нет  
+ left=1cm,  
+ right=2cm,  
+ top=3cm,
+ bottom=4cm,
    % use vmargin=2cm to make vertical margins equal to 2cm.
    % us  hmargin=3cm to make horizontal margins equal to 3cm.
    % use margin=3cm to make all margins  equal to 3cm.

+ onecolumn, twocolumn - набирать документ в один столбец или в два столбца  
+ twoside, oneside - выбирает одно или двусторонний ввод  
+ landscape - меняет положение страницы на ландшафтное  
+ openright, openany - делает главы начинающимися только на правой или на первой доступной стр.  
<!-- }}} -->
### usepackage<!-- {{{ -->
Структура - `\usepackage[opt]{package}`  
Некоторые из пакетов:  

+ doc - документировать программы на latex  
+ exscale - масштабированные версии расширенных мат. шрифтов  
+ fontenc - указывает кодировку шрифта  
+ ifthen - ветвление  
+ latexsym - шрифт специальных символов  
+ makeidx - генерация указателей  
+ syntonly - обрабатывает документ, не печатая его  
+ inputenc - указывает входную кодировку  
<!-- }}} -->
<!-- }}} -->
## Пакеты, настройки<!-- {{{ -->
### Настройка языка | неправильные переносы<!-- {{{ -->
Если форматный файл Теха не поддерживает переносов для выбранного языка, babel будет работать, но запретит переносы, что негативно скажется на внешнем виде
Если используешь несколько языков:
\usepackage[lan1,lan2]{babel}
Для выбора текущего используй команду:
\selectlanguage{lan1}
<!-- }}} -->
<!-- }}} -->
<!-- }}} -->
# Содержание<!-- {{{ -->
## Структура<!-- {{{ -->
Для книг:  
+ `\frontmatter` - первая команда после бегиндокумент, переключает нумерацию на римские цифры  
+ `\mainmatter` - перед первой главной, переключает нумерацию на цифры и сбрасывает счётчик  
+ `\appendix` - доп материал  
+ `\backmatter` - самые последние части книги  
### Титульный лист<!-- {{{ -->
Генерируется с помщью: `\maketitle`  
Содержимое определяется командами: `\title{}, \author{}, \data{}`  
<!-- }}} -->
### Заголовки, главы и разделы<!-- {{{ -->
Заголовки, главы и разделы
_Пример:_ `\chapter[Заголовок для оглавления]{Длиннный заголовок в тексте}`  
Для __article__:  
+ `\section{}`  
+ `\subsection{}`  
+ `\subsubsection{}`  
+ `\paragraph{}`  
+ `\subparagraph{}`  
+ _В report и book_ - `\chapter{}`  

LaTeX создаёт оглавление: `\tableofcontents`  

Если надо разбить на части __без изм.__ нумерации: `\part{}`  
Чтобы убрать __нумерацию__ - добавить звёздочку к концу команды.  
<!-- }}} -->
### Отступы на страницах
<!-- }}} -->
## Добавление файлов<!-- {{{ -->
Включить содержимое другого файла:  
`\include{файл}`  
Читать только некоторые из включённых файлов:  
`\includeonly{fname1, fname2, ...}`  
Просто включить содержимое:  
`\input{fname}`  
<!-- }}} -->
## Невидимые символы<!-- {{{ -->
### Пробел  <!-- {{{ -->
+ Несколько последовательных пустых символов = 1 пробел  
+ Пустые символы в начале строки игнорируются  
+ Единичный перевод строки = пробел  
+ Пустая строка между двух строк = конец абзаца   
+ Несколько пустых строк = 1 пустая строка  

__Манипуляция с пробелами__:  
+ `\` запрещает увеличение пробела  
+ `~` то же самое, запрещает разрыв строки.  
+ `\frenchspacing` - запретить доп. пробел после точек  
<!-- }}} -->
### Перенос строки<!-- {{{ -->
+ `\\` или `\newline` начинают новую строку  
+ `\\*` запрещает разрыв страницы  
+ `\newpage` начинает новую страницу  
+ `\linebreak[n]`, `\nolinebreak[n]`, `\pagebreak[n]`, `\nopagebreak[n]` - разрыв и запрет разрыва соответственно  

Указать __место для переноса__ - `\-` (делает его единственным).  
__Запрещение__ переносов на определённое слово: `\hyphenation{список слов}`  
  
Несколько слов можно __удержать вместе__ командой: `\mbox{текст}`  
`\fbox` аналогична, но будет нарисована видимая рамка.  
<!-- }}} -->
<!-- }}} -->
## Символы<!-- {{{ -->
\ = $\backslash$
Для __кавычек__ используются '' \`\`  

Несколько видов __тире__:   
+ `-`   дефис  
+ `--`  короткое тире  
+ `---` длинное тире  

Чтобы использовать __тильду__ `\~{}` или `$\sim$`  

Знак __градуса__ `^{\circ}`  
Знак __евро__:  
```latex
\usepackage{textcomp}
\texteuro
```
либо:
```latex
\usepackage[official|gen]{eurosym}
\texteuro
```
либо:
```latex
\usepackage{marvosym} - включает множество разных симв.
\EUR
```

__Многоточие__ - `\ldots`

__Акценты__ и __спец. символы__ ( при \i \j ):  
+ `\^`  
+ `\"`  
+ `\'`  
+ \\\`  
+ `\o`  
+ `\~`  
+ `\ss`  

Текущая дата на текущем языке - `\today`  
<!-- }}} -->
## Объекты <!-- {{{ -->
### Таблицы<!-- {{{ -->
`\begin{tabular}[позиция]{спецификация}`  
_Спецификация_: _(определяет формат таблицы)_  

+ `l` - столбец выровнен влево  
+ `r` - вправо   
+ `c` - центр  
+ `p{ширина}` - для стобца содержащего выровненный текст с переносом
  строк  
+ `|` - для вертикальной линии  
+ `${...}` - задать разделитель между стобцами (заменяет пробел на
  переданный символ)  

_Позиция_: _(вертикальное положение всего табличного окружения)_  

+ `t,b,c` - выравнивание по верхнему, нижнему или центру
  соответственно  

Внутри окружения `tabular`:  

+ `&` переходит к следующему столбцу  
+ `\\` начинает новую строку  
+ `\hline` вставляет горизонтальную линию  
+ `\cline{j-i}` вставляет неполные линии, где j и i - номера столбцов,
  над которыми должна проходить линия  

Как сделать выравнивание по десятичной точке в ТеХе:  
```latex
\begin{tabular}{c r ${.} l}
Выражение с $\pi$ & \multicolumn{2}{c}{Значение} \\
\hline
$\pi$               & 3&1416    \\
$\pi^{\pi}$         & 36&46     \\
$(\pi^{\pi})^{\pi}$ & 80662&7   \\
\end{tabular}
```

Multicolumn позволяет поставить одно название на две колонки.  
Точку в числе заменяем на разделитель. Таким образом происходит
выравнивание по точке.  

Если нужно набирать длинные таблицы, используй окружения `supertabular`
или `longtable`.  
<!-- }}} -->
### Плавающие объекты <!-- {{{ -->
Любая иллюстрация или таблица, не умещающаяся на текущей странице, может
"плавать", перемещаясь на следующую страницу в процессе заполнения
текстом текущей.  
LaTeX предлагает два окружения - одно для таблиц, второе для
иллюстраций.  

---  

Любой материало включенный в окружения `figure` или `table`, трактуется
как плавающий. Оба окружения имею необязательный параметр (спец. разм.):  

+ `\begin{figure}[спецификация размещения]`  
+ `\begin{table}[спецификация размещения]`  

Спецификация размещения конструируется путем собирания в строчку _ключей
размещения плавающего объекта._  

| Ключ | Разрешает помещать объект                                                           |
| ---  | ---                                                                                 |
| h    | здесь же, в том самом месте текста, где он появился (обычно для маленьких объектов) |
| t    | наверху страницы                                                                    |
| b    | внизу страницы                                                                      |
| p    | на специальной странице, содержащей только плавающие объекты                        |
| !    | не рассматривать больш. внутр. параметров, кот. могут предотвратить размещение      |

Если спецификации размещения **_не задано_**, стандартные классы
предполагают `[tbp]`  

Заметки:

+ Если LaTeX не размещает плавающие объекты, обычно это
происходит потому, что какой то объект устроил затор.  
+ Не используйте ключ `h`  

---  

+ `\caption[коротки заголовок]{длинный заголовок}` - можешь создать
заголовок для объекта.  
+ `\listoffigures` и `\listoftables` - печатают список иллюстраций и
  таблиц  
+ `\label` (в окружении) и `\ref` (в тексте) - можно делать ссылки из вашего текста на плавающий
  объект  
+ `\clearpage` - немедленно разместить все плавающие объекты, оставшиеся
  в очередях, и затем начать новую страницу  
+ `\cleardoublepage` - помимо этого начинает новую правостороннюю
  страницу  

<!-- }}} -->
<!-- }}} -->
## Форматирование<!-- {{{ -->
`\sloppy` - ослабить стандарты  
`\fussy` - усилить стандарты  

Сменить стиль __текущей страницы__ командой: `\thispagestyle{style}`  
### Текст<!-- {{{ -->
__Выделение слова__:  
+ `\underline{текст}` - подчёркивание  
+ `\emph{текст}` - курсив   
__Выравнивание__ влево, вправо и по центру:  
+ `\begin{flushleft}`  
+ `\begin{flushright}`  
+ `\begin{center}`  
__Списки__:  
+ `\begin{itemize}` - не нумерованные списки  
+ `\begin{enumerate}` - нумерованные списки  
+ `\begin{description}` - с выделением слова  
Их элемент: `\item[то что идёт вначале]`   
__Цитаты__: _строки разделяются при помощь \\_  
+ `\begin{quote}`  
+ `\begin{quotation}` - для цитирования с абзацами  
+ `\begin{verse}` - для стихов  
__Буквальное воспроизведение__: _(если внутри много специальных
символов)_:
+ `\begin{verbatim}`  
+ `\verb+текст+` - вместо + может быть любой символ разграничитель  
<!-- }}} -->
<!-- }}} -->
## Колонтитулы<!-- {{{ -->
Предопределённые комбинации верхнего колонтитула, нижнего колонтитула.
`\pagesyle{стиль}`, где стиль:  

+ `plain` - номера страниц внизу в середине  
+ `headings` - название текущей главы и номер страницы в верхнем колонитуле, нижний - пустой  
+ `empty` - делает и верхние и нижние колонитулы пустыми  

---  
**Нумерация**  
`\appendix` - начинает нумеровать главы буквами вместо цифр  
<!-- }}} -->
## Ссылки<!-- {{{ -->
+ `\label{метка}`  
+ `\ref{метка}`  
+ `\pageref{метка}`  
<!-- }}} -->
## Сноски<!-- {{{ -->
+ `\footnote{текст сноски}`  
<!-- }}} -->
## Защита хрупких команд <!-- {{{ -->
Текст, заданные в аргументах команд наподобие `\caption` или `\section`,
появляется в документе больше одного раза (например, в оглавлении, в
колонтитулах и в теле документа). Некоторые команды не работает в
аргументах вышеперечисленных. Такие команды называют **_хрупкими_**
(`\footnote` или `\phantom`). Для того, чтобы они работали как
предполагается, необходимо перед ними поставить команду `\protect`.  
<!-- }}} -->
<!-- }}} -->
# Набор математических формул <!-- {{{ -->
## Общее <!-- {{{ -->
В латехе есть специальный режим для верстки математики.  

+ внутри абзаца вводится между `\(` и `\)`, между `$` и `$`, между
  `\begin{math}` и `\end{math}`;  
+ на отдельных строчках. Заключать между `\[` и `\]` или между
  `\begin{displaymath}` и `\end{displaymath}`;  

Для **_нумерации_** используй окружение `equation`.  
Можно поместить метку с помощью `\label` и сослаться с помощью `\ref`
или `\eqref`:  

```latex
\begin{equation}
    \label{eq:eps}
    \epsilon > 0
\end{equation}
Из (\ref{eq:eps}) выводим \ldots{} из eqref{eq:eps} мы делаем то же.
```

Отличие _математического режима_ от _текстового режима_. В мат режиме:  

1. Большиство пробелов и возвратов каретки не принимаются во внимание,
   или должны явно передаваться командами вроде `\,`,`\quad` или `\qquad`  
2. Пустые строчки недопустимы.  
3. Каждая буква считается именем переменной.  
<!-- }}} -->
## Групировка в математическом режиме <!-- {{{ -->
Если хочешь чтобы команда влияла на не сколько символов, надо их
сгрупировать с помощью фигурных скобок: `{...}`  
```latex
\begin{equation}
    a^x+y \new a^{x+y}
\end{equation}
```

<!-- }}} -->
## Составляющие математической формулы <!-- {{{ -->
Наиболее важные команды в математической вестке.  

**Строчные греческие буквы:** `\alpha`, `\beta`, `\gamma`, ...  
прописные вводятся как `\Gamma`, `\Delta`, ...  

**Верхние и нижние индексы** вводятся при помощи `^` и `_`  

**Квадратный корень** - `\sqrt[n]`  

**Горизонтальные линии** сразу над или под выражением - `\overline` и
`\underline`.  

**Горизонтальные фигурные скобки** сразу над или под выражением -
`\overbrace` и `\underbrace`:  
```latex
$\underbrace{ a+b+\cdots+z }_{26}$
```

Широкие "шляпки" и тильды, охватывающие несколько символов, генерируются
командами `\widetilde` и `\widehat`.  

`'` - знак производной.  

**Векторы** - либо `\vec`, либо, для обозначения вектора от A до B -
`\overrightarrow` и `\overleftarrow`.  

**Знак точки**, обозначающий умножение - `\cdot`.  

Набор имен наиболее **важных функций**:  

|         |       |      |       |         |         |      |
| ---     | ---   | ---  | ---   | ---     | ---     | ---  |
| \arccos | \cos\ | csc  | \exp  | \ker    | \limsup | \min |
| \arcsin | \cosh | \deg | \gcd  | \lg     | \ln     | \Pr  |
| \arctan | \cot  | \det | \hom  | \lim    | \log    | \sec |
| \arg    | \coth | \dim | \inf  | \liminf | \max    | \sin |
| \sinh   | \sup  | \tan | \tanh |         |         |      |

**Функция модуля** - `\bmod` (_a_ mod _b_), `\pmod` (_x_ == _a_ (mod _b_))  
```latex
$a\bmod b$\\
$x\equiv a \pmod{b}$
```

**Дробь** - `\frac{...}{...}`  

**Биномиальные коэффиценты** или аналогичные структуры - `\binom` из
пакета _amsmath_  

Для бинарных отношение бывает удобно размещать **символы друг над другом** - `\stackrel`
- набирает символ, заданные первым аргументом (шрифтом индексов) и размещает его над
вторым аргументом.  

**Оператор интеграла** печатает команда `\int`, **оператор суммы** -
`\sum`, **оператор произведения** - `\prod`. Пределы указываются при
помощи символов `^` и `_`  

Для получения большего контроля над размещением индексов - `\substack`
и окружение `subarray`.  
Они вдвоем позволяют расположить индесы в два ряда, разделение которых
происходит с помощью двойного слеша (\\\\)  

Для **скобок** и прочих ограничителей. Квадратные и круглые скобки можно
вводить соответствующими клавишами, фигурные скобки - `\{`  
Если ты поместишь перед открывающим ограничителем команду `\left`, или
перед закрывающим - `\right`, то тех автоматически выберет правильный
размер ограничителя.  
Если необходимо задать корректный размер **_самостоятельно_** существуют
команды-префиксы - `\big`, `\Big`, `\bigg` и `\Bigg`.  

Чтобы ввести **три точки** - `\ldots`, `\cdots` (центрированные),
`\vdots` (вертикальные) и `\ddots` (диагональные)  


<!-- }}} -->
<!-- TODO: поставить в какую нибудь группу -->
Жирные символы - `\mathbf{}`  
Ажурные полужирные символы - `\mathbb` из пакетов _amsfonts_ или
_amssymb_.  
`\textrm{}`  
## Математические пробелы <!-- {{{ -->
В порядке увеличения пр-ва:  

+ `\,`  
+ `\:`  
+ `\;`  
+ `\ ` (экранированный пробел)  
+ `\quad(<space><space><space>)` - дает большие пробелы (размер каждого
  примерно равен ширине М)
+ `\!` - отрицательный пробел

Между интегралами много пространства - помогут команды `\iint`,
`\iiint`, `\iiiint` и `\dotsint` (с загруженным пакетом **_amsmath_**).  

<!-- }}} -->
## Вертикально расположенный материал <!-- {{{ -->
Для верстки **матриц** пользуйтесь окружением _array_. Его структура
напоминает окружение _tabular_. Для разделителя - `&`, для разрыва
строки - `\\`.  

Окружение `array` можно также использовать для верстки выражений,
имеющих один большой ограничитель, подставляя `.` в качестве невидимого
правого ограничителя:  
```latex
\begin{displaymath}
y = \left\{ \begin{array}{ll}
    a & \textrm{если $d>c$} \\
    b+x & \textrm{по утрам} \\
    l & \textrm{остальное время дня}
    \end{array} \right.
\end{displaymath}
```

Так же как в _tabular_, можно рисовать линейки в окружении _array_.  

```latex
\begin{displaymath}
\left(\begin{array}{c|c}
    1 & 2 \\
    \hline
    3 & 4
end{array}\right)
\end{displaymath}
```

Для формул **занимающих несколько строк** используй окружения `eqnarray`
(нумерует уравнения) и `eqnarray*` (не нумерует). Эти окружения работают
наподобие таблицы из трех столбцов формата _{rcl}_, где средний столбец
используется для знака равенства. Команда `\\` разбивает строки.  

По обеим сторонам средней колонки слишком много места, его можно
уменьшить с помощью `\setlength\arraycolsep{2pt}`. (открываешь фигурные
скобки, в самом начале (как буд-то секция в C) пишешь эту команду, после
которой открываешь окружение на несколько строк)  

**Длинные уравнения** автору придется разбивать на части самостоятельно
(так же надо указать как выравнивать).  

+ _Для переноса_ - `\\`  
+ Для того, чтобы **не нумеровать строчку** с которой переносишь, перед
  знаком разбиения надо поставить команду - `\nonumber`  
+ На новой строчке пишешь как в таблице, возможно пропустишь какое-то
  кол-во столбцов.  
+ Перед первым знаком на новой строчке пишешь закрытые фигурные скобки
  как - `{}+a`  

Более мощные инструменты предлагает пакет _amsmath_ окружения _align_,
_flalign_, _gather_, _multiline_ и _split_  

<!-- }}} -->
## Фантомы <!-- {{{ -->
`\phantom` позволяет вставлять символы, которых не будет видно (для
выравнивания, или создания отступов).  
<!-- }}} -->
## Размер математического шрифта <!-- {{{ -->
Чтобы вставлять текст в уравнения, лучше использовать `\mathrm`. Прим.:
русские буквы могут не работать и может понадобиться команда `\cyrmathrm`  
При подключении _amsmath_ команда `\textrm` начинает работать с
изменением размера.  
Для конкретного задания стиля существуют команды:  

+ `\displaystyle` - пределы отображаются сверху  
+ `\textstyle`  
+ `\scriptstyle`  
+ `\scriptscriptstyle`  

Выбранный стиль влияет на отображение пределов.  
<!-- }}} -->
## Теоремы, законы, ... <!-- {{{ -->
Команда - `\newtheorem{название}[счетчик]{текст}[раздел]` - указывается
в преамбуле  

+ _Название_ - краткое ключевое слово.  
+ _Текст_ - настоящее название теоремы.  
+ _Счетчик_ - можно указать предварительно объявленную теоремуу  
+ _Раздел_ - внутри какого раздела нумеровать теорему  

После ее использования, можно пользоваться следующими окружениями:  
```latex
\begin{название}[текст]
    Это интересная теорема.
\end{название}
```

Пример:  
```latex
% определения для преамбулы документа
\newtheorem{law}{Law}
\newtheorem{jury}[law]{Jury}
% в теле документа
\begin{law} \label{law:box}
    Don't hide in the witness box
\end{law}
\begin{jury}[The Twelve]
    It could be you! So beware and see law~\ref{law:box}
\end{jury}
\begin{law} No, No, No \end{law}
```


<!-- }}} -->
## Полужирные символы <!-- {{{ -->
`\mathbg` - пожужирные **прямые** символы.  
Пакет **_amsbsy_**, равно как и пакет **_bm_** (из набора _tools_),
включает команду `\boldsymbol`. Она дает полужирные **_курсивные_**
символы.  
<!-- }}} -->
## Список математических символов <!-- {{{ -->
Страница 79 pdf, 63 книга.  
Или же можешь воспользоваться [этим](http://detexify.kirelabs.org/classify.html)  
<!-- }}} -->
<!-- }}} -->
# Специальные возможности <!-- {{{ -->
## Графика <!-- {{{ -->
В LaTeX можно добавлять картинки. Мы будем обсуждать только картинки в
формате Encapsulated PostScript (EPS). Чтобы использовать такие
картинки, нужно использовать для вывода PostScript принтер (или
GhostScript)  
Хороший набор команд включения графики входит в пакет _graphicx_.  

Для включения картинки в ваш документ:  

1. Экспортируй картинку из вашей графической программы в формате EPS.  
2. В преамбуле загрузи пакет `graphicx` при помощи  
    `\usepackage[драйвер]{graphicx}`, где _драйвер_ - название вашего
    конвертера DVI в PostScript. Самый широко используемый - `dvips`  
3. Для влючения _файла_ в документ используй  
    `\includegraphics[опция=значения, ...]{файл}`  

Пример:  
```latex
\begin{figure}
\begin{center}
% поворачивает на 90 градусов пчс
% масштабирует до ширины 0.5 стандартного абзаца (пропорции сохр.)
\includegraphics[angle=90, width=0.5\textwidth]{test}
\end{center}
\end{figure}
```

Все опции:  

+ **width** - масштабирует графику до указанной ширины  
+ **height** - масштабирует графику до указанной высоты  
+ **angle** - поворачивает графику против часовой стрелки  
+ **scale** - масштабирует графику  
<!-- }}} -->
## Библиография <!-- {{{ -->
Окружение `thebibliography` генерирует библиографию, где каждый элемент
начинается с `\bibitem[метка]{маркер}`  
Затем _маркер_ используется для дальнейших ссылок: `\cite{маркер}`  

Пример:  
```latex
Partl~\cite{pa} предложил, чтобы \ldots

\begin{thebibliography}{99} % номера элементов уже чем число 99
\bibitem{pa} H.~Partl: \emph{German \TeX}, TUGboat Volume ~9, Issue ~1
('88)
\end{thebibliography}
```

В больших проектах обрати внимание на программу BibTeX  

<!-- }}} -->
## Указатели <!-- {{{ -->
Указатели могут создаваться автоматически при помощи команды
`makeindex`.  

Для включения в преамбуле закружается пакет `makeidx`:  
```latex
\usepackage{makeidx}
```
а специальные команды должны быть разрешены помещением в преамбулу
команды  
```latex
\makeindex
```
Содержимое указателя создается командами `\index{ключ}`, где _ключ_
является элементом указателя.

**Пример** - **Вид указателя** - **Комментарий**  

+ `\index{hello}` - hello, 1 - обычный элемент  
+ `\index{hello!Peter}` -  Peter, 3 - Подчиненный 'hello' элемент  
+ `\index{Sam@\textsl{Sam}}` - _Sam_, 2 - Форматированнай ключ  
+ `\index{Lin@\textbf{Lin}}` - **Lin**, 7 - То же  
+ `\index{Jenny|textbf}` - Jenny, **3** - форматированная страница  
+ `\index{Joe|textit}` - Joe, _5_ - То же  
+ `\index{eolienne@\'eolienne}` - eolinne, 4 - акцентированные буквы  

Отсортированные указатели вставляются командой `\printindex`  

<!-- }}} -->
## Настраиваемые колонтитулы<!-- {{{ -->
Пакет `fancyhdr` предоставляет такие возможности.  
_(в книге не было обучению этому пакету, так что читай документацию)_  

Для большей гибкости, если хочешь изменить вид названия главы в верхнем
колонтитуле, просто переопредели команду `\chaptermark`, `\sectionmark`
и\или `\subsectionmark` (они обычно вызываются LaTeXом для определения
вывода текущей главы и секции)  
<!-- }}} -->
## Пакет `verbatim`<!-- {{{ -->
В нем исправлены некоторые из ограничений оригинального окружения.  
В нем найдешь команду:  
```latex
\verbatiminput{файл}
```
которая позволяет включать текстовый файл в документ, как если бы его
содержимое находилось внутри окружения `verbatim`  
_(входит в комплект 'tools')_  
<!-- }}} -->
## Загрузка и установка пакетов LaTeX<!-- {{{ -->
Основное место (как указанно в книге) для поиска стилевых пакетов в
Интернете - [CTAN](http://www.ctan.org/)  

Пакеты, такие как `geometry`, `hyphenat` и многиек другие, обычно
состоят из двух файлов: .ins, .dtx.  

Теперь необходимо чтобы 1) TeX узнал о наличии нового пакета, 2) Ты
получил необходимую документацию:  
Первая часть:  

1. Обработай LaTeX файл `.ins`. На выходе ты получишь файл `.sty`.  
2. Помести файл `.sty` туда, где ваш дистрибутив ищет эти файлы. Обычно
   это подкаталоги каталога `.../localtexmf/tex/latex`  
3. Обнови базу имен файлов дистрибутива. Команда зависит от конкретно
   дистрибутива:  
    1. `teTeX`, `fpTeX` - `texhash`  
    2. `web2c` - `maktexlsr`  
    3. `MixTeX` - `initexmf -update-fndb`  

Теперь можешь из файла `.dtx` получить документацию:  

1. Обработайте файл `.dtx`. На выходе получишь файл `.dvi`. Заметь что
   нужно запустить LaTeX несколько раз, чтобы получить правильные
   перекрестные ссылки.  
2. Проверьте, не сгенерировал ли LaTeX, кроме всего прочего, файл
   `.idx`. Если его нет, то переходи к пункту **5**.  
3. Для генерации предметного указателя, выполни команду:  
    `makeindex -s gind.ist имя` (где _имя_ - имя основного файла без
    расширения).  
4. Снова оработай LaTeX файл `.dtx`  
5. В конце концов, для удобства чтения сгенерируйте файл `.ps` или `.pdf`  

Иногда генерируется также файл `.glo` (глоссарий). В этом случае между
шагами **4** и **5** выполни команду:  
```shell
$ makeindex -s gglo.ist -o имя.gls имя.glo
```
и еще раз запусти LaTeX с файлом `.dtx`  

<!-- }}} -->
## Работа с pdfLaTeX <!-- {{{ -->
Так как использования HTML для отображения LaTeX документов в интернете
вызывает большие сложности связанные с корректным отображением, лучше
всего использовать PDF.  
<!-- }}} -->
## Шрифты <!-- {{{ -->
Очень много инфы на стр 96  
<!-- }}} -->
## Использование графики <!-- {{{ -->
С указанием значения `pdftex` в опции _driver_ этот пакет успешно
работает с pdfLaTeX:  
```latex
\usepackage[pdftex]{color,graphicx}
```
Графика в формате Encapsulated PostScript не работает с pdfLaTeX. Если
не задать расширение файла в команде `\includegraphics`, пакет
**graphicx** выберет подходящий файл, основывясь на значении опции
_driver_ (для `pdftex` это форматы **.png**, **.pdf**, **.jpg**, но не
**.eps**)  
Способ решения - сконцертировать файлы EPS в формат PDF ктилитой
epstopdf  

Иногда может быть желательно вообще не рисовать геометрические фигуры, а
описать их на языке специальных команд, таком как META-POST, включенном
в большинство дистрибутивов TeX. В комплекте есть полное руководство по
его использованию  
<!-- }}} -->
## Гиперссылки <!-- {{{ -->
Пакет `hyperref` превратит все внутренние ссылки в гиперссылки. Но для
этого необходимо чтобы `\usepackage[pdftex]{hyperref}` была _последней_
командой в преамбуле.  

Для настройки можно перечислять опции после _pdftex_ через запятую:  
значения по умолчанию - прямым шрифтом  

+ **bookmarks** (=true,_false_) - показывает или прячет полосу закладок при
  просмотре документа  
+ **unicode** (=false, _true_) - позволяет использовать в закладках
  нелатинские символы  
+ **pdftoolbar** (=true, _false_) - показывает или прячет линейку
  инструментов Acrobar  
+ **pdfmenubar** (=true, _false_) - показывает или прячет меню Acrobar  
+ **pdffitwindow** (=true, _false_) - меняет начальное увеличение документа
  (страница размеров в окно Acrobar)  
+ **pdftitle** (={text}) - устанавливает заголовок, отображаемый Acrobar в
  окне `Document Info`  
+ **pdfauthor** (={text}) - задает автора PDF-документа  
+ **pdfnewwindow** (=true, _false_) - определяет, должно ли открываться
  новое окно, если гиперссылка ведет в другой документ  
+ **colorlinks** (=false, _true_) - окружает ссылки цветными рамками (false)
  или меняет цвет текста ссылок (true). Цвет можно настроить следующими
  опциями (показаны значения по умолчанию):
    - **linkcolor** (=red) цвет внутренних ссылок (разделы, страницы и т.п.)  
    - **citecolor** (=green) цвет ссылок на литературу  
    - **filecolor** (=magenta) цвет ссылок на файлы  
    - **urlcolor** (=cyan) цвет ссылок на URL  

Примеры пользования:  
```latex
% открыть окно закладок, раскрасить ссылки
\usepackage[pdftex,bookmarks,colorlinks]{hyperred}
```
или
```latex
\usepackage{hyperref}
\hypersetup{colorlinks,%
    citecolor=black,%
    filecolor=black,%
    linkcolor=black,%
    urlcolor=black,%
    pdftex}
```
Если нужно задать информацию для секции Document Info:
```latex
\usepackagep[pdfauthor={Pierre Desproges},%
            pdftitle={Des femmes qui tombent},%
            pdftex]{hyperref}
```
Вставлять ссылки явно - `\gref{url}{text}`. Можно на сайт, или на
локальный файл (относительный или абсолютный путь)  


<!-- }}} -->
## Проблемы со ссылками <!-- {{{ -->
Команда `\mainmatter` сбрасывает счетчик номера страницы в 1,
генерируется сообщения ошибки. Проблема заключается в том, что во
вводной части книги уже была страница номер 1, и все ссылки на страницу
1 уже не уникальный.  
Избавится можно при помощи опции к `hyperref` - `plainpages=false`.  
Или `hypertexnames=false`, но вместе с этим перестанут работать ссылки
из предметного указателя.  
<!-- }}} -->
## Проблемы с закладками <!-- {{{ -->
Математические выражения и цвета плохо работают в закладках.
`\texorpdfstring{текст TeXa}{текст закладки}` - предоставляет текстовую
строчку взамен проблемного текста  
Поэтому можно использовать это:  
```latex
\section{\texorpdfstring{$E=mc^2$}%
        {E\ =\ mc\texttwosuperior}}
```
или это для цветов:
```latex
\section{\texorpdfstring{\textcolor{red}{Red !}}{Red\ !}}
```


<!-- }}} -->
## Совместимость исходных текстов LaTeX и pdfLaTeX <!-- {{{ -->
Лучшим выбором будет просто переводить картинки в формат .eps  
<!-- }}} -->
## Создание презентаций при помощи pdfscreen <!-- {{{ -->
<!-- p. 103 -->
Не буду расписывать, т.к. пока не использую LaTeX для этой цели, но
хорошей стартовой позицией для начала может служить указанная выше
страница в книге  

Основные преимущества, возможностей гораздо больше
(кроссплатформенность)  

Пакеты - `pdfscreen` и `Ppower4`
<!-- }}} -->
<!-- }}} -->
# Генерация математической графики <!-- {{{ -->
> наконец-то смогу строить бенчмарки прямо внутри latex  

## Обзор <!-- {{{ -->
Окружение `picture` позволяет программировать картинки прямо в среде
LaTeX. Подробное описание в _LaTeX Manual_.  
Наклоны отрезков и радиусы дуг сильно граничены в возможных значениях. С
другой стороны `picture` предлагает команду `\qbezier` (q -
квадратичный), с помощью которой можно апроксимировать круг с помощью
квадратичными кривыми Безье.  

Пакеты наподобие `epic` и `eepic` (улучшают окружение `picture`) или
`pstricks` (имеет собвенное окружение для рисования, широко использует
функциональность PostScript) помогают снять
ограничения `picture` и сильно развивают графические возможности LaTeX.  

Самый мощный графический инструмент - METAPOST.  
<!-- }}} -->
## Окружение `picture` <!-- {{{ -->
### Основные команды <!-- {{{ -->
Окружение `picture` создается одной из двух команд:  
+ `\begin{picture}(x,y)...\end{picture}`  
+ `\begin{picture}(x,y)(x0,y0)...\end{picture}`  

Числа _x_, _y_, _x0_, _y0_ измеряются в размерности `\unitlength`,
которую можно менять в любой момент (но не внутри окружения `picture`).
Например: `\setlength{\unitlength}{1.2cm}`. По умолчанию - 1pt.  

+ `(x,y)` - резервируем прямоугольное пространство  
+ `(x0,y0)` - задаем координаты нижнему левому углу  

Большинство команд рисования имеют одну из двух форм:  

+ `\put(x,y){объект}`  
+ `\multiput(x,y)(dx,dy){n}{объект}`  
+ Кривые Безье - `\qbezier(x1,y1)(x2,y2)(x3,y3)`  

<!-- }}} -->
### Отрезки <!-- {{{ -->
Рисуются командой:
```latex
\put(x,y){\line(x1,y1){length}}
```

Команда `\line` имеет два аргумента:  

1. вектор направления (должны ббыть взаимно простыми)  
2. длина  
<!-- }}} -->
### Векторы <!-- {{{ -->
<!-- TODO: stopped here -->
<!-- }}} -->
<!-- }}} -->
<!-- }}} -->
